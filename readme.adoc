= Phobias Alexa Skill

== Setup DynamoDB

. Create a DynamoDB table `Phobias`

== Create S3 bucket

. Create bucket: `aws s3 mb s3://phobias-skill --region us-west-1`.

== Create Deployment Package

. Create and upload a deployment package: `mvn -f phobias/pom.xml package install`

== Alexa Skills Kit

. Build Alexa Skills Kit for Java
.. Fork and clone https://github.com/amzn/alexa-skills-kit-java
.. Install locally: `mvn install`

== Skills Lambda Function

. Create a package: `mvn package`. Alternatively, https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/deploying-a-sample-skill-to-aws-lambda#preparing-a-java-sample-to-deploy-in-lambda[tutorial] recommends: `mvn assembly:assembly -DdescriptorId=jar-with-dependencies package`
. Upload to S3: `mvn install`
. Create Lambda function:
+
```
aws lambda create-function \
--function-name Hello \
--runtime java8 \
--memory-size 1024 \
--timeout 30 \
--region us-east-1 \
--role arn:aws:iam::091144949931:role/lambda_basic_execution \
--handler org.sample.aws.serverless.phobias.PhobiaSpeechletRequestStreamHandler \
--zip-file fileb://./phobias/target/phobias-1.0-SNAPSHOT.jar \
--publish
```

== Alexa Skills Kit

. Set up `Alexa Skills Kit` as a trigger for Lambda function in the Console
. Get Function ARN: `aws lambda get-function --function-name Hello --region us-east-1 | jq .Configuration.FunctionArn`
. Create an account at http://developer.amazon.com and login
. Select `Alexa`, `Alexa Skills Kit`, `Get Started >`, `Add a New Skill`
. Follow the instructions as explained at https://developer.amazon.com/alexa-skills-kit/alexa-skill-quick-start-tutorial.
. Step #6 at https://github.com/arun-gupta/alexa-skills-kit-java/tree/master/samples/src/main/java/helloworld#alexa-skill-setup is critical to enable authorization.


